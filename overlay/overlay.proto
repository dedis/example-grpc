syntax = "proto3";

package overlay;

import "google/protobuf/any.proto";

service Overlay {
    rpc identity(IdentityRequest) returns (IdentityResponse) {}

    rpc aggregate(AggregateRequest) returns (AggregateResponse) {}
}

message Identity {
    string addr = 1;
    google.protobuf.Any value = 2;
    bytes signature = 3;
}

message IdentityRequest {
    string protocol = 1;
    Tree tree = 2;
}

message IdentityResponse {
    repeated Identity identities = 1;
}

message Tree {
    repeated string addresses = 1;
    int32 k = 2;
}

message AggregateRequest {
    string protocol = 1;
    Tree tree = 2;
    repeated Identity identities = 3;
    google.protobuf.Any message = 4;
}

message AggregateResponse {
    google.protobuf.Any message = 1;
}

message TestMessage {
    int64 value = 1;
}
